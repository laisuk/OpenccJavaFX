#!/bin/bash
set -e

JAVA=java
LIB="lib"

# Find the most recent JAR file in build/libs (handles spaces & non-ASCII safely)
APP=$(find build/libs -maxdepth 1 -type f -name "*.jar" -printf "%T@ %p\n" 2>/dev/null \
  | sort -nr | head -n 1 | cut -d' ' -f2-)

# Check if a JAR file was found
if [ -z "$APP" ]; then
  echo "‚ùå No JAR file found in build/libs/"
  exit 1
fi

echo "Using latest JAR: $APP"

# Run the CLI (no JavaFX or module system required)
"$JAVA" \
  -Dfile.encoding=UTF-8 \
  -cp "$APP:$LIB/*" \
  openccjavacli.Main "$@"
